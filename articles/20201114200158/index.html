<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="ja" >

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <title>ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸ | takağŸ‘¨ğŸ»â€ğŸ’»</title>
  
  
  
  <link href="https://takakd.github.io/index.xml" rel="alternate" type="application/rss+xml" title="takağŸ‘¨ğŸ»â€ğŸ’»" />
  
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  
  <link rel='stylesheet' href='/assets/style.min.a637c76d326f6af57819d41db749ed25e02ebfd6adf2891c2da22c6ccf95e8c7.css'>
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="shortcut icon" href="/favicon.ico">
  
  
  
  
  
  
  
  <meta name="description"
    content="ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã§ãŠã™ã™ã‚ã®æ›¸ç±ã‚’æ•™ãˆã¦ã„ãŸã ã„ãŸã®ã§èª­ã¿ã¾ã—ãŸã€‚ ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸ï¼ˆãƒªãƒ•ãƒ­ãƒ¼ç‰ˆï¼‰ æ•™ç§‘æ›¸ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«é€šã‚Šã€å®Ÿè£…æ–¹æ³•ã ã‘ã§ã¯ãªããƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã®æ¦‚è¦ã‹ã‚‰å®Ÿè£…ã«é–¢ã™ã‚‹æ³¨æ„ç‚¹ã¾" />
</head>

<body class="d-flex flex-column vh-100">
  <section class="nav-Section m-0 p-0">
  <nav class="nav d-flex px-4 px-lg-5 align-items-center justify-content-between">
    <div class="my-3 my-lg-4">
      <a class="p-0 text-decoration-none" href="https://takakd.github.io">
        <h1 class="cs-title p-0 m-0">takağŸ‘¨ğŸ»â€ğŸ’»</h1>
      </a>
    </div>
    <nav><a href="/about/" class="cs-menu-link text-decoration-none">
        About
      </a></nav>
  </nav>
</section>
  <section class="sn-Section m-0 p-0">
    <div class="px-4 px-lg-5 pt-5 pb-5">
      <h1 class="cs-title">ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸</h1>
      <h2 class="cs-subtitle pt-2">2020-11-14</h2>
      <div class="m-0 p-0">
        
          <a class="cs-tags" href="/tags/blockchain">#blockchain</a><span class="ml-1 mr-1">|</span><a class="cs-tags" href="/tags/solidity">#solidity</a><span class="ml-1 mr-1">|</span><a class="cs-tags" href="/tags/ethereum">#ethereum</a>
        
      </div>
      
      <div class="content sn-Content mt-5">
        <p>ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã§ãŠã™ã™ã‚ã®æ›¸ç±ã‚’æ•™ãˆã¦ã„ãŸã ã„ãŸã®ã§èª­ã¿ã¾ã—ãŸã€‚</p>
<p><a href="https://www.amazon.co.jp/dp/B079JYHZY3/">ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸ï¼ˆãƒªãƒ•ãƒ­ãƒ¼ç‰ˆï¼‰</a></p>
<p>æ•™ç§‘æ›¸ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«é€šã‚Šã€å®Ÿè£…æ–¹æ³•ã ã‘ã§ã¯ãªããƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã®æ¦‚è¦ã‹ã‚‰å®Ÿè£…ã«é–¢ã™ã‚‹æ³¨æ„ç‚¹ã¾ã§ç¶²ç¾…ã•ã‚Œã¦ã„ã¾ã™ã€‚Solidityã«ã‚ˆã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å®Ÿè£…ã¨åˆã‚ã›ã¦ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«é–¢ã—ã¦å¤–è¦³ã‚’çœºã‚ãŸã„äººã«ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚</p>
<p>ã“ã®æ›¸ç±ã¯å‡ºç‰ˆãŒ2018å¹´ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€æ›¸ç±ã«æ²è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã®ã„ãã¤ã‹ã¯ãã®ã¾ã¾å®Ÿè¡Œã§ããªã„ã‚‚ã®ãŒã‚ã‚Šã¾ã—ãŸã€‚ã“ã‚Œã‹ã‚‰èª­ã¾ã‚Œã‚‹æ–¹ã«å‘ã‘ã¦è¦šãˆã¦ã„ã‚‹ç¯„å›²ã§ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆã®å†…å®¹ã‚’æ®‹ã—ã¦ãŠãã¾ã™ã€‚</p>
<h2 id="å®Ÿè¡Œç’°å¢ƒ">å®Ÿè¡Œç’°å¢ƒ</h2>
<ul>
<li>macOS 10.15.5</li>
<li>node v15.0.1</li>
<li>npm 7.0.3</li>
<li>go 1.14.4</li>
</ul>
<h2 id="ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆ">ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆ</h2>
<p><a href="https://www.amazon.co.jp/dp/B079JYHZY3/">Kindleãƒªãƒ•ãƒ­ãƒ¼ç‰ˆ</a>ã«åŸºã¥ã„ã¦è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚<br>
å¯¾è±¡ã¯ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆå®Ÿè£…ã«é–¢ã™ã‚‹Chapter6ã‹ã‚‰8ã§ã™ã€‚<br>
Solidityæ§‹æ–‡ã«é–¢ã™ã‚‹7.2ã‹ã‚‰7.5ã¯å¯¾è±¡å¤–ã§ã™ã€‚</p>
<h3 id="6143-gethã®åˆæœŸåŒ–å‡¦ç†">6.1.4.3: Gethã®åˆæœŸåŒ–å‡¦ç†</h3>
<p>æ¬¡ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚</p>
<pre><code class="language-shell">Fatal: Failed to write genesis block: unsupported fork ordering: eip150Block not enabled, but eip155Block enabled at 0
</code></pre>
<p>6.1.4.1ã®<code>genesis.json</code>ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒå¤‰ã‚ã£ãŸã®ã§ã€æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p>
<pre><code class="language-json">{
  &quot;config&quot;: {
    &quot;chainId&quot;: 33,
    &quot;homesteadBlock&quot;: 0,
    &quot;eip150Block&quot;: 0,
    &quot;eip155Block&quot;: 0,
    &quot;eip158Block&quot;: 0,
    &quot;byzantiumBlock&quot;: 0,
    &quot;constantinopleBlock&quot;: 0,
    &quot;petersburgBlock&quot;: 0,
    &quot;istanbulBlock&quot;: 0
  },
  &quot;alloc&quot;: {},
  &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,
  &quot;difficulty&quot;: &quot;0x20000&quot;,
  &quot;extraData&quot;: &quot;&quot;,
  &quot;gasLimit&quot;: &quot;0x2fefd8&quot;,
  &quot;nonce&quot;: &quot;0x0000000000000042&quot;,
  &quot;mixhash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,
  &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,
  &quot;timestamp&quot;: &quot;0x00&quot;
}
</code></pre>
<p><strong>Ref:</strong></p>
<ul>
<li><a href="https://github.com/ethereum/go-ethereum/blob/feeccdf4ec1084b38dac112ff4f86809efd7c0e5/params/config.go#L71">https://github.com/ethereum/go-ethereum/blob/feeccdf4ec1084b38dac112ff4f86809efd7c0e5/params/config.go#L71</a></li>
</ul>
<h3 id="6158-ãƒ­ãƒƒã‚¯ã®è§£é™¤">6.1.5.8: ãƒ­ãƒƒã‚¯ã®è§£é™¤</h3>
<p><code>personal.unlockAccount</code>ã§ã‚¨ãƒ©ãƒ¼ãŒã§ã¾ã—ãŸã€‚</p>
<pre><code class="language-shell">GoError: Error: account unlock with HTTP access is forbidden at web3.js:6347:37(47)
        at native
        at &lt;eval&gt;:1:24(6)
</code></pre>
<p>6.1.4.6ã®gethèµ·å‹•ã‚³ãƒãƒ³ãƒ‰ã«<code>--allow-insecure-unlock</code>ã‚’è¿½åŠ ã™ã‚‹ã¨å®Ÿè¡Œå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code class="language-shell">geth --networkid &quot;33&quot; --nodiscover --datadir $DATA_DIR --rpc --rpcaddr &quot;localhost&quot; --rpcport &quot;8545&quot; --rpccorsdomain &quot;*&quot; --rpcapi &quot;eth,net,web3,personal&quot; \
    --allow-insecure-unlock \
    --targetgaslimit &quot;20000000&quot; console 2&gt;&gt; ${DATA_DIR}/error.log
</code></pre>
<p>unlockã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ©Ÿèƒ½OFFã«å¤‰æ›´ã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚</p>
<p><strong>Ref:</strong></p>
<ul>
<li><a href="https://github.com/ethereum/go-ethereum/pull/17037">https://github.com/ethereum/go-ethereum/pull/17037</a></li>
<li><a href="https://github.com/ethereum/go-ethereum/issues/19507#issuecomment-487453981">https://github.com/ethereum/go-ethereum/issues/19507#issuecomment-487453981</a></li>
</ul>
<h3 id="7122-simplestoragesol">7.1.2.2: SimpleStorage.sol</h3>
<p>Solidityã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§è¨˜è¿°æ–¹æ³•ãŒå¤‰ã‚ã£ãŸã®ã§ã€æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p>
<pre><code class="language-sol">// remix IDEã‚µãƒ³ãƒ—ãƒ«solidityã‚³ãƒ¼ãƒ‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åˆã‚ã›ã‚‹
pragma solidity &gt;=0.4.22 &lt;0.7.0;

contract SimpleStorage {
    uint storedData;

    // publicãŒå¿…è¦
    function set(uint x) public {
        storedData = x;
    }

    // publicãŒå¿…è¦ã€constantå»ƒæ­¢ã€viewã«å¤‰ãˆã‚‹
    function get() public view returns (uint) {
        return storedData;
    }
}
</code></pre>
<h3 id="7129-simplestorageownersol">7.1.2.9: SimpleStorageOwner.sol</h3>
<p>ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®æ›¸å¼ãŒå¤‰ã‚ã£ãŸã®ã§ã€æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p>
<pre><code class="language-sol">pragma solidity &gt;=0.4.22 &lt;0.7.0;

contract SimpleStorageOwner {
    uint storedData;
    address owner;

    // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®è¨˜è¿°ãŒã€construct() publicã«å¤‰æ›´
    constructor() public {
        owner = msg.sender;
    }
    // ...
}
</code></pre>
<p><strong>Ref:</strong></p>
<ul>
<li><a href="https://solidity.readthedocs.io/en/v0.5.3/050-breaking-changes.html?highlight=constructor">https://solidity.readthedocs.io/en/v0.5.3/050-breaking-changes.html?highlight=constructor</a></li>
</ul>
<h3 id="8162-metacoinsol">8.1.6.2: MetaCoin.sol</h3>
<p>Solidityã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§è¨˜è¿°æ–¹æ³•ãŒå¤‰ã‚ã£ãŸã®ã§ã™ãŒã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§å–å¾—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚Œã°OKã§ã—ãŸã€‚</p>
<pre><code class="language-shell">$ truffle unbox metacoin
</code></pre>
<h3 id="8168-metacoinã‚’å¤‰æ•°ã«ä¿å­˜ã™ã‚‹">8.1.6.8: MetaCoinã‚’å¤‰æ•°ã«ä¿å­˜ã™ã‚‹</h3>
<pre><code class="language-shell">truffle(develop)&gt; m = await MetaCoin.at(&quot;&lt;address&gt;&quot;)
</code></pre>
<p><code>at</code>ã¯<code>Promise</code>ã‚’è¿”ã™ã‚ˆã†ã«ãªã£ãŸã®ã§<code>await</code> or ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§å—ã‘å–ã‚Šã¾ã™ã€‚</p>
<p><strong>Ref:</strong></p>
<ul>
<li><a href="https://www.trufflesuite.com/docs/truffle/getting-started/interacting-with-your-contracts#use-a-contract-at-a-specific-address">https://www.trufflesuite.com/docs/truffle/getting-started/interacting-with-your-contracts#use-a-contract-at-a-specific-address</a></li>
</ul>
<p>ã¾ãŸã€8.1.6.7ã®å‡ºåŠ›å½¢å¼ãŒå¤‰ã‚ã£ãŸã®ã§ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯<code>contract address:</code>ã®å€¤ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
<pre><code class="language-shell">Replacing 'MetaCoin'
   --------------------
   &gt; transaction hash:    0xdf84b6dc0debb81e22284bbc8b214c27a9c5b18b76e5ea9baef60c33bc3916b1
   &gt; Blocks: 0            Seconds: 0
   &gt; contract address:    0x1dA8f51aad5Eb8B2997AA9dc0FFD838900A2CA1C
   &gt; block number:        9
</code></pre>
<h3 id="8169-getbalanceã®å‘¼ã³å‡ºã—">8.1.6.9: getBalanceã®å‘¼ã³å‡ºã—</h3>
<p><code>web3.eth.getAccounts</code>ã¯<code>Promise</code>ã‚’è¿”ã™ã‚ˆã†ã«ãªã£ãŸã®ã§<code>await</code> or ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§å—ã‘å–ã‚Šã¾ã™ã€‚<br>
8.1.6.11 - 8.1.6.17ã§<code>web3.eth.getAccounts</code>ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨ã“ã‚ã‚‚åŒæ§˜ã«<code>accounts[&lt;index&gt;]</code>ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>
<pre><code class="language-shell">truffle(develop)&gt; accounts = await web3.eth.getAccounts()
truffle(develop)&gt; m.getBalance(accounts[0])
</code></pre>
<p><strong>Ref:</strong></p>
<ul>
<li><a href="https://www.trufflesuite.com/docs/truffle/getting-started/interacting-with-your-contracts#making-a-transaction">https://www.trufflesuite.com/docs/truffle/getting-started/interacting-with-your-contracts#making-a-transaction</a></li>
</ul>
<h3 id="8221-openzeppelinã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">8.2.2.1: OpenZeppelinã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h3>
<p>zeppelin-solidityã¯deprecatedã«ãªã‚Šã¾ã—ãŸã€‚ä»£ã‚ã‚Šã«openzeppelin-contractsã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
<pre><code class="language-shell">$ npm init -f 
$ npm install @openzeppelin/contracts
</code></pre>
<p><strong>Ref:</strong></p>
<ul>
<li><a href="https://www.npmjs.com/package/zeppelin-solidity">https://www.npmjs.com/package/zeppelin-solidity</a></li>
</ul>
<h3 id="8231-ãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ">8.2.3.1: ãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ</h3>
<p>openzeppelin-contractsã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚è¨˜è¿°ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p>
<pre><code class="language-sol">pragma solidity &gt;=0.5.16 &lt;0.8.0;

import &quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;;

// https://docs.openzeppelin.com/contracts/2.x/erc20-supply
contract DappsToken is ERC20 {
    string public name = &quot;Dappstoken&quot;;
    string public symbol = &quot;DTKN&quot;;
    uint public decimals = 18;

    constructor(uint256 initialSupply) public {
        _mint(msg.sender, initialSupply);

        // 8.3.2.15ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã¯10e18ã‚’è¿½åŠ 
        //_mint(msg.sender, initialSupply * (10 ** 18));
    }
}
</code></pre>
<h3 id="8243-ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ">8.2.4.3: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ</h3>
<p>8.1.6.8åŒæ§˜ã«<code>await</code>ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
<pre><code class="language-shell">truffle(develop)&gt; dappsToken = await DappsToken.at(DappsToken.address)
</code></pre>
<h3 id="8313-trufflejs">8.3.1.3: truffle.js</h3>
<p><code>networks.development.network_id</code>ã¯gethã®<code>run</code>ã‚³ãƒãƒ³ãƒ‰ã§æŒ‡å®šã—ã¦ã„ã‚‹<code>--networkid</code>ã¨åŒã˜å€¤ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>
<h3 id="8327-matemask-ether-faucetã§ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¡Œ">8.3.2.7: MateMask Ether Faucetã§ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¡Œ</h3>
<p>ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦Etherã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚å–å¾—ã¯åˆ¥ã‚µã‚¤ãƒˆã§ã‚‚å¯èƒ½ãªã®ã§ãã‚Œã‚’åˆ©ç”¨ã—ã¾ã™ã€‚ã„ãã¤ã‹ã‚ã‚‹ã‚ˆã†ã§ã™ãŒä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã§å–å¾—ã§ãã¾ã—ãŸã€‚</p>
<p><a href="https://faucet.dimensions.network/">Ethereum Faucet - Ropsten</a></p>
<p><strong>Ref:</strong></p>
<ul>
<li><a href="https://github.com/MetaMask/metamask-extension/issues/5439#issuecomment-716547644">https://github.com/MetaMask/metamask-extension/issues/5439#issuecomment-716547644</a></li>
</ul>
<h3 id="83211-trufflejsã«ropstenã‚’è¨­å®š">8.3.2.11: truffle.jsã«Ropstenã‚’è¨­å®š</h3>
<p>truffleã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§è¨˜è¿°æ–¹æ³•ãŒå¤‰ã‚ã£ãŸã®ã§ã€npmãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p>
<p><strong>@truffle/hdwallet-providerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¿½åŠ </strong></p>
<p>truffle-config.jsã§ä½¿ç”¨ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
<pre><code class="language-shell">$ npm install @truffle/hdwallet-provider
</code></pre>
<p><strong>.secret</strong></p>
<p>èªè¨¼æƒ…å ±ã‚’<code>.secret</code>ã«å®šç¾©ã—ã¾ã™ã€‚MetaMaskã§ä½œæˆã—ãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ‹ãƒ¼ãƒ¢ãƒ‹ãƒƒã‚¯ã‚’ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¾ã™ã€‚</p>
<pre><code class="language-ini">&lt;nemonic1&gt; &lt;nemonic2&gt; &lt;nemonic3&gt; ...
</code></pre>
<p><strong>truffle-config.js</strong></p>
<p>ãƒ•ã‚¡ã‚¤ãƒ«åãŒ<code>truffle.js</code>ã‹ã‚‰<code>truffle-config.js</code>ã«å¤‰ã‚ã‚Šã¾ã—ãŸã€‚<br>
<code>HDWalletProvider</code>ã«æ¸¡ã™URLã«<code>accessToken</code>ã§ã¯ãªã<code>PROJECT SECRET</code>ã‚’æ¸¡ã—ã¾ã™ã€‚<code>PROJECT SECRET</code>ã¯<a href="https://infura.io">Infura</a>ã§ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å–å¾—ã§ãã¾ã™ã€‚</p>
<pre><code class="language-js">const HDWalletProvider = require('@truffle/hdwallet-provider');
const fs = require('fs');
const mnemonic = fs.readFileSync(&quot;.secret&quot;).toString().trim();

module.exports = {
  networks: {
    development: {
     host: &quot;localhost&quot;,     // Localhost (default: none)
     port: 8545,            // Standard Ethereum port (default: none)
     network_id: &quot;33&quot;,       // Any network (default: none)
    },
    ropsten: {
      provider: () =&gt; new HDWalletProvider(mnemonic, `https://ropsten.infura.io/v3/&lt;Infura PROJECT SECRET&gt;`),
      network_id: 3,       // Ropsten's id
      gas: 5500000,        // Ropsten has a lower block limit than mainnet
      confirmations: 2,    // # of confs to wait between deployments. (default: 0)
      timeoutBlocks: 200,  // # of blocks before a deployment times out  (minimum/default: 50)
      skipDryRun: true     // Skip dry run before migrations? (default: false for public nets )
    },
  },
  ...
};
</code></pre>
<h3 id="83214-83215">8.3.2.14, 8.3.2.15</h3>
<p><code>migrate</code>ã§<code>initialSupply</code>ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã®ã§ã€Contractå´ã§1e18ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p>
<p><strong>2_deploy_dapps_token.js</strong></p>
<pre><code class="language-js">const DappsToken = artifacts.require(&quot;./Dappstoken.sol&quot;);

module.exports = function(deployer){
    const initialSupply = 1000;
    // ã“ã“ã§ã¯1000ã‚’æ¸¡ã™
    deployer.deploy(DappsToken, initialSupply, {
        gas: 2000000
    });
}
</code></pre>
<p><strong>DappsToken.sol</strong></p>
<pre><code class="language-sol">pragma solidity &gt;=0.5.16 &lt;0.8.0;

import &quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;;

// https://docs.openzeppelin.com/contracts/2.x/erc20-supply
contract DappsToken is ERC20 {
    string public name = &quot;Dappstoken&quot;;
    string public symbol = &quot;DTKN&quot;;
    uint public decimals = 18;

    constructor(uint256 initialSupply) public {
        // ã“ã“ã§decimalsã«åˆã‚ã›ã€1e18ã™ã‚‹
        _mint(msg.sender, initialSupply * (10 ** 18));
    }
}
</code></pre>
<h3 id="83220-å¤‰æ•°ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š">8.3.2.20: å¤‰æ•°ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š</h3>
<p>overflowã§å¤±æ•—ã™ã‚‹ã®ã§<code>web3.utils.toBN</code>ã§å¤‰æ›ã—ãŸå€¤ã‚’æ¸¡ã—ã¾ã™ã€‚</p>
<pre><code class="language-shell">truffle(ropsten)&gt; d.transfer(â€œ&lt;receiver address&gt;â€, web3.utils.toBN(1e18))
</code></pre>
<h3 id="83221-æ®‹é«˜ã®ç¢ºèª">8.3.2.21: æ®‹é«˜ã®ç¢ºèª</h3>
<p>æ®‹é«˜ãŒ<code>word</code>ã«å€¤ã‚’åˆ†å‰²ã—ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ã«è¡¨ç¤ºã™ã‚‹ã¨ä¸€ã¤ã®å€¤ã§è¡¨ç¤ºã§ãã¾ã™ã€‚</p>
<pre><code class="language-shell">truffle(ropsten)&gt; d.totalSupply().then(result =&gt; {console.log(result.toString())})
</code></pre>
<h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚</h2>
<p>Solidityã‚„é–¢é€£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«ä¼´ã„ã€ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒå¤§ããå¤‰åŒ–ã—ã¦ã„ã‚‹ã“ã¨ã§ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³é–¢é€£æŠ€è¡“ã®å¤‰åŒ–ã®é€Ÿã•ã‚’å®Ÿæ„Ÿã—ã¾ã™ã­ã€‚<br>
èª¿ã¹ã¦ã„ã‚‹ã¨ã€ã‚‚ã†ã“ã“ã¾ã§é–‹ç™ºãŒé€²ã‚“ã§ã„ã‚‹ã®ã‹ã¨ã„ã†å°è±¡ã‚‚ã€‚</p>

        
      </div>
      
    </div>
  </section>
  


<section class="ft-Section mt-auto ml-0 mr-0 mb-0 pa-0">
  <div class="d-flex px-5 py-lg-3 pt-4 pb-3 align-items-center justify-content-md-between align-items-md-center flex-lg-row flex-column">
    <div class="d-flex align-items-center"><a class="ml-4 cs-sns-icon-link" aria-label="facebook"
        href='https://facebook.com/takakd987' target='_blank' rel='noopener'><?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g><path d="M1024,512c0,-282.77 -229.23,-512 -512,-512c-282.77,0 -512,229.23 -512,512c0,255.554 187.231,467.37 432,505.78l0,-357.78l-130,0l0,-148l130,0l0,-112.8c0,-128.32 76.438,-199.2 193.39,-199.2c56.017,0 114.61,10 114.61,10l0,126l-64.562,0c-63.603,0 -83.438,39.467 -83.438,79.957l0,96.043l142,0l-22.7,148l-119.3,0l0,357.78c244.769,-38.41 432,-250.226 432,-505.78Z" style="fill:#fff;fill-rule:nonzero;"/></g></svg></a><a class="ml-4 cs-sns-icon-link" aria-label="github"
        href='https://github.com/takakd' target='_blank' rel='noopener'><?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 33 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path d="M16.288,0.015c-8.994,0 -16.288,7.293 -16.288,16.29c0,7.197 4.667,13.302 11.14,15.456c0.815,0.15 1.112,-0.353 1.112,-0.785c0,-0.387 -0.014,-1.411 -0.022,-2.77c-4.531,0.984 -5.487,-2.184 -5.487,-2.184c-0.741,-1.882 -1.809,-2.383 -1.809,-2.383c-1.479,-1.01 0.112,-0.99 0.112,-0.99c1.635,0.115 2.495,1.679 2.495,1.679c1.453,2.489 3.813,1.77 4.741,1.353c0.148,-1.052 0.569,-1.77 1.034,-2.177c-3.617,-0.411 -7.42,-1.809 -7.42,-8.051c0,-1.778 0.635,-3.233 1.677,-4.371c-0.168,-0.412 -0.727,-2.069 0.16,-4.311c0,0 1.367,-0.438 4.479,1.67c1.299,-0.362 2.693,-0.542 4.078,-0.549c1.384,0.007 2.777,0.187 4.078,0.549c3.11,-2.108 4.475,-1.67 4.475,-1.67c0.889,2.242 0.33,3.899 0.163,4.311c1.044,1.138 1.674,2.593 1.674,4.371c0,6.258 -3.809,7.635 -7.437,8.038c0.584,0.503 1.105,1.497 1.105,3.016c0,2.178 -0.02,3.935 -0.02,4.469c0,0.436 0.294,0.943 1.12,0.784c6.468,-2.159 11.131,-8.26 11.131,-15.455c0,-8.997 -7.294,-16.29 -16.291,-16.29Z" style="fill:#fff;"/></svg></a><a class="ml-4 cs-sns-icon-link" aria-label="linkedin"
        href='https://linkedin.com/in/takakd' target='_blank' rel='noopener'><svg id="Group_1282" data-name="Group 1282" xmlns="http://www.w3.org/2000/svg" width="76.624" height="65.326" viewBox="0 0 76.624 65.326">
  <path id="Path_2525" data-name="Path 2525" d="M1165,274.515a1.2,1.2,0,0,0,1.21-1.269c0-.9-.543-1.33-1.657-1.33h-1.8v4.712h.677v-2.054h.832l.019.025,1.291,2.029h.724l-1.389-2.1Zm-.783-.472h-.785V272.45h.995c.514,0,1.1.084,1.1.757,0,.774-.593.836-1.314.836" transform="translate(-1092.136 -213.406)" fill="#0a66c2"/>
  <path id="Path_2520" data-name="Path 2520" d="M958.98,112.559h-9.6V97.525c0-3.585-.064-8.2-4.993-8.2-5,0-5.765,3.906-5.765,7.939v15.294h-9.6V81.642h9.216v4.225h.129a10.1,10.1,0,0,1,9.093-4.994c9.73,0,11.524,6.4,11.524,14.726ZM918.19,77.416a5.571,5.571,0,1,1,5.57-5.572,5.571,5.571,0,0,1-5.57,5.572m4.8,35.143h-9.61V81.642h9.61Zm40.776-55.2h-55.21a4.728,4.728,0,0,0-4.781,4.67v55.439a4.731,4.731,0,0,0,4.781,4.675h55.21a4.741,4.741,0,0,0,4.8-4.675V62.025a4.738,4.738,0,0,0-4.8-4.67" transform="translate(-903.776 -57.355)" fill="#0a66c2"/>
  <path id="Path_2526" data-name="Path 2526" d="M1156.525,264.22a4.418,4.418,0,1,0,.085,0h-.085m0,8.33a3.874,3.874,0,1,1,3.809-3.938c0,.022,0,.043,0,.065a3.791,3.791,0,0,1-3.708,3.871h-.1" transform="translate(-1084.362 -207.809)" fill="#0a66c2"/>
</svg>
</a><a class="ml-4 cs-sns-icon-link" aria-label="twitter"
        href='https://twitter.com/takakdkd' target='_blank' rel='noopener'><?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 20.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="White" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 400" style="enable-background:new 0 0 400 400;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#FFFFFF;}
</style>
<path class="st0" d="M400,200c0,110.5-89.5,200-200,200S0,310.5,0,200S89.5,0,200,0S400,89.5,400,200z M163.4,305.5
	c88.7,0,137.2-73.5,137.2-137.2c0-2.1,0-4.2-0.1-6.2c9.4-6.8,17.6-15.3,24.1-25c-8.6,3.8-17.9,6.4-27.7,7.6
	c10-6,17.6-15.4,21.2-26.7c-9.3,5.5-19.6,9.5-30.6,11.7c-8.8-9.4-21.3-15.2-35.2-15.2c-26.6,0-48.2,21.6-48.2,48.2
	c0,3.8,0.4,7.5,1.3,11c-40.1-2-75.6-21.2-99.4-50.4c-4.1,7.1-6.5,15.4-6.5,24.2c0,16.7,8.5,31.5,21.5,40.1c-7.9-0.2-15.3-2.4-21.8-6
	c0,0.2,0,0.4,0,0.6c0,23.4,16.6,42.8,38.7,47.3c-4,1.1-8.3,1.7-12.7,1.7c-3.1,0-6.1-0.3-9.1-0.9c6.1,19.2,23.9,33.1,45,33.5
	c-16.5,12.9-37.3,20.6-59.9,20.6c-3.9,0-7.7-0.2-11.5-0.7C110.8,297.5,136.2,305.5,163.4,305.5"/>
</svg>
</a></div>
    <div>
      <p class="ml-0 mr-0 mb-0 mt-3 mt-lg-0 p-0 cs-copyright">&copy; taka 2018</p>
      
    </div>
  </div>
</section>






<script src="/assets/bundle.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-108607644-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




</body>

</html>