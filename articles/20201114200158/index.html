<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã§ãŠã™ã™ã‚ã®æ›¸ç±ã‚’æ•™ãˆã¦ã„ãŸã ã„ãŸã®ã§èª­ã¿ã¾ã—ãŸã€‚ ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸ï¼ˆãƒªãƒ•ãƒ­ãƒ¼ç‰ˆï¼‰ æ•™ç§‘æ›¸ã¨ã„ã†ã‚¿ã‚¤"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸"><meta property="og:description" content="ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã§ãŠã™ã™ã‚ã®æ›¸ç±ã‚’æ•™ãˆã¦ã„ãŸã ã„ãŸã®ã§èª­ã¿ã¾ã—ãŸã€‚ ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸ï¼ˆãƒªãƒ•ãƒ­ãƒ¼ç‰ˆï¼‰ æ•™ç§‘æ›¸ã¨ã„ã†ã‚¿ã‚¤"><meta property="og:type" content="article"><meta property="og:url" content="https://takakd.github.io/articles/20201114200158/"><meta property="article:published_time" content="2020-11-14T20:01:58+09:00"><meta property="article:modified_time" content="2020-12-03T22:35:36+09:00"><title>ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸ | takağŸ‘¨ğŸ»â€ğŸ’»</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.becc5f833d5163a998ae7d18e80e7d882d355079fc4dc44a8860ee1c2a960a7a.css integrity="sha256-vsxfgz1RY6mYrn0Y6A59iC01UHn8TcRKiGDuHCqWCno="><script defer src=/en.search.min.d864b04d1b39a7cce07fcdaa85493e85bfe752f3a5ecd421e7bdba0ba0a5f0fd.js integrity="sha256-2GSwTRs5p8zgf82qhUk+hb/nUvOl7NQh5726C6Cl8P0="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-108607644-3','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>takağŸ‘¨ğŸ»â€ğŸ’»</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/articles/>Articles</a></li><li><a href=/journals/>Journals</a></li><li><a href=/about/>About</a></li><li><a href=https://github.com/takakd target=_blank rel=noopener>Github</a></li><li><a href=https://www.linkedin.com/in/takakd/ target=_blank rel=noopener>Linkedin</a></li><li><a href=https://twitter.com/takakdkd target=_blank rel=noopener>Twitter</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#å®Ÿè¡Œç’°å¢ƒ>å®Ÿè¡Œç’°å¢ƒ</a></li><li><a href=#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆ>ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆ</a><ul><li><a href=#6143-gethã®åˆæœŸåŒ–å‡¦ç†>6.1.4.3: Gethã®åˆæœŸåŒ–å‡¦ç†</a></li><li><a href=#6158-ãƒ­ãƒƒã‚¯ã®è§£é™¤>6.1.5.8: ãƒ­ãƒƒã‚¯ã®è§£é™¤</a></li><li><a href=#7122-simplestoragesol>7.1.2.2: SimpleStorage.sol</a></li><li><a href=#7129-simplestorageownersol>7.1.2.9: SimpleStorageOwner.sol</a></li><li><a href=#8162-metacoinsol>8.1.6.2: MetaCoin.sol</a></li><li><a href=#8168-metacoinã‚’å¤‰æ•°ã«ä¿å­˜ã™ã‚‹>8.1.6.8: MetaCoinã‚’å¤‰æ•°ã«ä¿å­˜ã™ã‚‹</a></li><li><a href=#8169-getbalanceã®å‘¼ã³å‡ºã—>8.1.6.9: getBalanceã®å‘¼ã³å‡ºã—</a></li><li><a href=#8221-openzeppelinã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>8.2.2.1: OpenZeppelinã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li><li><a href=#8231-ãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ>8.2.3.1: ãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ</a></li><li><a href=#8243-ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ>8.2.4.3: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ</a></li><li><a href=#8313-trufflejs>8.3.1.3: truffle.js</a></li><li><a href=#8327-matemask-ether-faucetã§ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¡Œ>8.3.2.7: MateMask Ether Faucetã§ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¡Œ</a></li><li><a href=#83211-trufflejsã«ropstenã‚’è¨­å®š>8.3.2.11: truffle.jsã«Ropstenã‚’è¨­å®š</a></li><li><a href=#83214-83215>8.3.2.14, 8.3.2.15</a></li><li><a href=#83220-å¤‰æ•°ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š>8.3.2.20: å¤‰æ•°ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š</a></li><li><a href=#83221-æ®‹é«˜ã®ç¢ºèª>8.3.2.21: æ®‹é«˜ã®ç¢ºèª</a></li></ul></li><li><a href=#ã¾ã¨ã‚>ã¾ã¨ã‚</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1><a href=/articles/20201114200158/>ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸</a></h1><h5>2020-11-14</h5><div><a href=/tags/blockchain/>blockchain</a>,
<a href=/tags/solidity/>solidity</a>,
<a href=/tags/ethereum/>ethereum</a></div><p><p>ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã§ãŠã™ã™ã‚ã®æ›¸ç±ã‚’æ•™ãˆã¦ã„ãŸã ã„ãŸã®ã§èª­ã¿ã¾ã—ãŸã€‚</p><p><a href=https://www.amazon.co.jp/dp/B079JYHZY3/>ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æ•™ç§‘æ›¸ï¼ˆãƒªãƒ•ãƒ­ãƒ¼ç‰ˆï¼‰</a></p><p>æ•™ç§‘æ›¸ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«é€šã‚Šã€å®Ÿè£…æ–¹æ³•ã ã‘ã§ã¯ãªããƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã®æ¦‚è¦ã‹ã‚‰å®Ÿè£…ã«é–¢ã™ã‚‹æ³¨æ„ç‚¹ã¾ã§ç¶²ç¾…ã•ã‚Œã¦ã„ã¾ã™ã€‚Solidityã«ã‚ˆã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å®Ÿè£…ã¨åˆã‚ã›ã¦ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«é–¢ã—ã¦å¤–è¦³ã‚’çœºã‚ãŸã„äººã«ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚</p><p>ã“ã®æ›¸ç±ã¯å‡ºç‰ˆãŒ2018å¹´ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€æ›¸ç±ã«æ²è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã®ã„ãã¤ã‹ã¯ãã®ã¾ã¾å®Ÿè¡Œã§ããªã„ã‚‚ã®ãŒã‚ã‚Šã¾ã—ãŸã€‚ã“ã‚Œã‹ã‚‰èª­ã¾ã‚Œã‚‹æ–¹ã«å‘ã‘ã¦è¦šãˆã¦ã„ã‚‹ç¯„å›²ã§ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆã®å†…å®¹ã‚’æ®‹ã—ã¦ãŠãã¾ã™ã€‚</p><h2 id=å®Ÿè¡Œç’°å¢ƒ>å®Ÿè¡Œç’°å¢ƒ
<a class=anchor href=#%e5%ae%9f%e8%a1%8c%e7%92%b0%e5%a2%83>#</a></h2><ul><li>macOS 10.15.5</li><li>Node v15.0.1</li><li>npm 7.0.3</li><li>go 1.14.4</li><li>Truffle v5.1.52 (core: 5.1.52)</li><li>Solidity v0.5.16 (solc-js)</li><li>Web3.js v1.2.9</li></ul><h2 id=ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆ>ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆ
<a class=anchor href=#%e3%83%88%e3%83%a9%e3%83%96%e3%83%ab%e3%82%b7%e3%83%a5%e3%83%bc%e3%83%88>#</a></h2><p><a href=https://www.amazon.co.jp/dp/B079JYHZY3/>Kindleãƒªãƒ•ãƒ­ãƒ¼ç‰ˆ</a>ã«åŸºã¥ã„ã¦è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚<br>å¯¾è±¡ã¯ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆå®Ÿè£…ã«é–¢ã™ã‚‹Chapter6ã‹ã‚‰8ã§ã™ã€‚<br>Solidityæ§‹æ–‡ã«é–¢ã™ã‚‹7.2ã‹ã‚‰7.5ã¯å¯¾è±¡å¤–ã§ã™ã€‚</p><p>å¤‰æ›´æ¸ˆã¿ã®ã‚³ãƒ¼ãƒ‰ã¯
<a href=https://github.com/takakd/kata-dapps>ã“ã¡ã‚‰</a>ã«ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚</p><h3 id=6143-gethã®åˆæœŸåŒ–å‡¦ç†>6.1.4.3: Gethã®åˆæœŸåŒ–å‡¦ç†
<a class=anchor href=#6143-geth%e3%81%ae%e5%88%9d%e6%9c%9f%e5%8c%96%e5%87%a6%e7%90%86>#</a></h3><p>æ¬¡ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Fatal: Failed to write genesis block: unsupported fork ordering: eip150Block not enabled, but eip155Block enabled at <span style=color:#ae81ff>0</span>
</code></pre></div><p>6.1.4.1ã®<code>genesis.json</code>ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒå¤‰ã‚ã£ãŸã®ã§ã€æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;config&#34;</span>: {
    <span style=color:#f92672>&#34;chainId&#34;</span>: <span style=color:#ae81ff>33</span>,
    <span style=color:#f92672>&#34;homesteadBlock&#34;</span>: <span style=color:#ae81ff>0</span>,
    <span style=color:#f92672>&#34;eip150Block&#34;</span>: <span style=color:#ae81ff>0</span>,
    <span style=color:#f92672>&#34;eip155Block&#34;</span>: <span style=color:#ae81ff>0</span>,
    <span style=color:#f92672>&#34;eip158Block&#34;</span>: <span style=color:#ae81ff>0</span>,
    <span style=color:#f92672>&#34;byzantiumBlock&#34;</span>: <span style=color:#ae81ff>0</span>,
    <span style=color:#f92672>&#34;constantinopleBlock&#34;</span>: <span style=color:#ae81ff>0</span>,
    <span style=color:#f92672>&#34;petersburgBlock&#34;</span>: <span style=color:#ae81ff>0</span>,
    <span style=color:#f92672>&#34;istanbulBlock&#34;</span>: <span style=color:#ae81ff>0</span>
  },
  <span style=color:#f92672>&#34;alloc&#34;</span>: {},
  <span style=color:#f92672>&#34;coinbase&#34;</span>: <span style=color:#e6db74>&#34;0x0000000000000000000000000000000000000000&#34;</span>,
  <span style=color:#f92672>&#34;difficulty&#34;</span>: <span style=color:#e6db74>&#34;0x20000&#34;</span>,
  <span style=color:#f92672>&#34;extraData&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>,
  <span style=color:#f92672>&#34;gasLimit&#34;</span>: <span style=color:#e6db74>&#34;0x2fefd8&#34;</span>,
  <span style=color:#f92672>&#34;nonce&#34;</span>: <span style=color:#e6db74>&#34;0x0000000000000042&#34;</span>,
  <span style=color:#f92672>&#34;mixhash&#34;</span>: <span style=color:#e6db74>&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
  <span style=color:#f92672>&#34;parentHash&#34;</span>: <span style=color:#e6db74>&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;0x00&#34;</span>
}
</code></pre></div><p><strong>Ref:</strong></p><ul><li><a href=https://github.com/ethereum/go-ethereum/blob/feeccdf4ec1084b38dac112ff4f86809efd7c0e5/params/config.go#L71>https://github.com/ethereum/go-ethereum/blob/feeccdf4ec1084b38dac112ff4f86809efd7c0e5/params/config.go#L71</a></li></ul><h3 id=6158-ãƒ­ãƒƒã‚¯ã®è§£é™¤>6.1.5.8: ãƒ­ãƒƒã‚¯ã®è§£é™¤
<a class=anchor href=#6158-%e3%83%ad%e3%83%83%e3%82%af%e3%81%ae%e8%a7%a3%e9%99%a4>#</a></h3><p><code>personal.unlockAccount</code>ã§ã‚¨ãƒ©ãƒ¼ãŒã§ã¾ã—ãŸã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>GoError: Error: account unlock with HTTP access is forbidden at web3.js:6347:37<span style=color:#f92672>(</span>47<span style=color:#f92672>)</span>
        at native
        at &lt;eval&gt;:1:24<span style=color:#f92672>(</span>6<span style=color:#f92672>)</span>
</code></pre></div><p>6.1.4.6ã®gethèµ·å‹•ã‚³ãƒãƒ³ãƒ‰ã«<code>--allow-insecure-unlock</code>ã‚’è¿½åŠ ã™ã‚‹ã¨å®Ÿè¡Œå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>geth --networkid <span style=color:#e6db74>&#34;33&#34;</span> --nodiscover --datadir $DATA_DIR --rpc --rpcaddr <span style=color:#e6db74>&#34;localhost&#34;</span> --rpcport <span style=color:#e6db74>&#34;8545&#34;</span> --rpccorsdomain <span style=color:#e6db74>&#34;*&#34;</span> --rpcapi <span style=color:#e6db74>&#34;eth,net,web3,personal&#34;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --allow-insecure-unlock <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --targetgaslimit <span style=color:#e6db74>&#34;20000000&#34;</span> console 2&gt;&gt; <span style=color:#e6db74>${</span>DATA_DIR<span style=color:#e6db74>}</span>/error.log
</code></pre></div><p>unlockã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ©Ÿèƒ½OFFã«å¤‰æ›´ã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚</p><p><strong>Ref:</strong></p><ul><li><a href=https://github.com/ethereum/go-ethereum/pull/17037>https://github.com/ethereum/go-ethereum/pull/17037</a></li><li><a href=https://github.com/ethereum/go-ethereum/issues/19507#issuecomment-487453981>https://github.com/ethereum/go-ethereum/issues/19507#issuecomment-487453981</a></li></ul><h3 id=7122-simplestoragesol>7.1.2.2: SimpleStorage.sol
<a class=anchor href=#7122-simplestoragesol>#</a></h3><p>Solidityã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§è¨˜è¿°æ–¹æ³•ãŒå¤‰ã‚ã£ãŸã®ã§ã€æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sol data-lang=sol><span style=color:#75715e>// remix IDEã‚µãƒ³ãƒ—ãƒ«solidityã‚³ãƒ¼ãƒ‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åˆã‚ã›ã‚‹
</span><span style=color:#75715e></span><span style=color:#66d9ef>pragma solidity</span> <span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>4</span>.<span style=color:#ae81ff>22</span> <span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>7</span>.<span style=color:#ae81ff>0</span>;

<span style=color:#66d9ef>contract</span> SimpleStorage {
    <span style=color:#66d9ef>uint</span> storedData;

    <span style=color:#75715e>// publicãŒå¿…è¦
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>function</span> set(<span style=color:#66d9ef>uint</span> x) <span style=color:#66d9ef>public</span> {
        storedData <span style=color:#f92672>=</span> x;
    }

    <span style=color:#75715e>// publicãŒå¿…è¦ã€constantå»ƒæ­¢ã€viewã«å¤‰ãˆã‚‹
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>function</span> get() <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>view</span> <span style=color:#66d9ef>returns</span> (<span style=color:#66d9ef>uint</span>) {
        <span style=color:#66d9ef>return</span> storedData;
    }
}
</code></pre></div><h3 id=7129-simplestorageownersol>7.1.2.9: SimpleStorageOwner.sol
<a class=anchor href=#7129-simplestorageownersol>#</a></h3><p>ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®æ›¸å¼ãŒå¤‰ã‚ã£ãŸã®ã§ã€æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sol data-lang=sol><span style=color:#66d9ef>pragma solidity</span> <span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>4</span>.<span style=color:#ae81ff>22</span> <span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>7</span>.<span style=color:#ae81ff>0</span>;

<span style=color:#66d9ef>contract</span> SimpleStorageOwner {
    <span style=color:#66d9ef>uint</span> storedData;
    <span style=color:#66d9ef>address</span> owner;

    <span style=color:#75715e>// ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®è¨˜è¿°ãŒã€construct() publicã«å¤‰æ›´
</span><span style=color:#75715e></span>    constructor() <span style=color:#66d9ef>public</span> {
        owner <span style=color:#f92672>=</span> msg.sender;
    }
    <span style=color:#75715e>// ...
</span><span style=color:#75715e></span>}
</code></pre></div><p><strong>Ref:</strong></p><ul><li><a href="https://solidity.readthedocs.io/en/v0.5.3/050-breaking-changes.html?highlight=constructor">https://solidity.readthedocs.io/en/v0.5.3/050-breaking-changes.html?highlight=constructor</a></li></ul><h3 id=8162-metacoinsol>8.1.6.2: MetaCoin.sol
<a class=anchor href=#8162-metacoinsol>#</a></h3><p>Solidityã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§è¨˜è¿°æ–¹æ³•ãŒå¤‰ã‚ã£ãŸã®ã§ã™ãŒã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§å–å¾—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚Œã°OKã§ã—ãŸã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ truffle unbox metacoin
</code></pre></div><h3 id=8168-metacoinã‚’å¤‰æ•°ã«ä¿å­˜ã™ã‚‹>8.1.6.8: MetaCoinã‚’å¤‰æ•°ã«ä¿å­˜ã™ã‚‹
<a class=anchor href=#8168-metacoin%e3%82%92%e5%a4%89%e6%95%b0%e3%81%ab%e4%bf%9d%e5%ad%98%e3%81%99%e3%82%8b>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>truffle<span style=color:#f92672>(</span>develop<span style=color:#f92672>)</span>&gt; m <span style=color:#f92672>=</span> await MetaCoin.at<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&lt;address&gt;&#34;</span><span style=color:#f92672>)</span>
</code></pre></div><p><code>at</code>ã¯<code>Promise</code>ã‚’è¿”ã™ã‚ˆã†ã«ãªã£ãŸã®ã§<code>await</code> or ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§å—ã‘å–ã‚Šã¾ã™ã€‚</p><p><strong>Ref:</strong></p><ul><li><a href=https://www.trufflesuite.com/docs/truffle/getting-started/interacting-with-your-contracts#use-a-contract-at-a-specific-address>https://www.trufflesuite.com/docs/truffle/getting-started/interacting-with-your-contracts#use-a-contract-at-a-specific-address</a></li></ul><p>ã¾ãŸã€8.1.6.7ã®å‡ºåŠ›å½¢å¼ãŒå¤‰ã‚ã£ãŸã®ã§ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯<code>contract address:</code>ã®å€¤ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Replacing <span style=color:#e6db74>&#39;MetaCoin&#39;</span>
   --------------------
   &gt; transaction hash:    0xdf84b6dc0debb81e22284bbc8b214c27a9c5b18b76e5ea9baef60c33bc3916b1
   &gt; Blocks: <span style=color:#ae81ff>0</span>            Seconds: <span style=color:#ae81ff>0</span>
   &gt; contract address:    0x1dA8f51aad5Eb8B2997AA9dc0FFD838900A2CA1C
   &gt; block number:        <span style=color:#ae81ff>9</span>
</code></pre></div><h3 id=8169-getbalanceã®å‘¼ã³å‡ºã—>8.1.6.9: getBalanceã®å‘¼ã³å‡ºã—
<a class=anchor href=#8169-getbalance%e3%81%ae%e5%91%bc%e3%81%b3%e5%87%ba%e3%81%97>#</a></h3><p><code>web3.eth.getAccounts</code>ã¯<code>Promise</code>ã‚’è¿”ã™ã‚ˆã†ã«ãªã£ãŸã®ã§<code>await</code> or ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§å—ã‘å–ã‚Šã¾ã™ã€‚<br>8.1.6.11 - 8.1.6.17ã§<code>web3.eth.getAccounts</code>ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨ã“ã‚ã‚‚åŒæ§˜ã«<code>accounts[&lt;index>]</code>ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>truffle<span style=color:#f92672>(</span>develop<span style=color:#f92672>)</span>&gt; accounts <span style=color:#f92672>=</span> await web3.eth.getAccounts<span style=color:#f92672>()</span>
truffle<span style=color:#f92672>(</span>develop<span style=color:#f92672>)</span>&gt; m.getBalance<span style=color:#f92672>(</span>accounts<span style=color:#f92672>[</span>0<span style=color:#f92672>])</span>
</code></pre></div><p><strong>Ref:</strong></p><ul><li><a href=https://www.trufflesuite.com/docs/truffle/getting-started/interacting-with-your-contracts#making-a-transaction>https://www.trufflesuite.com/docs/truffle/getting-started/interacting-with-your-contracts#making-a-transaction</a></li></ul><h3 id=8221-openzeppelinã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>8.2.2.1: OpenZeppelinã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
<a class=anchor href=#8221-openzeppelin%e3%81%ae%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab>#</a></h3><p>zeppelin-solidityã¯deprecatedã«ãªã‚Šã¾ã—ãŸã€‚ä»£ã‚ã‚Šã«openzeppelin-contractsã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ npm init -f 
$ npm install @openzeppelin/contracts
</code></pre></div><p><strong>Ref:</strong></p><ul><li><a href=https://www.npmjs.com/package/zeppelin-solidity>https://www.npmjs.com/package/zeppelin-solidity</a></li></ul><h3 id=8231-ãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ>8.2.3.1: ãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ
<a class=anchor href=#8231-%e3%83%88%e3%83%bc%e3%82%af%e3%83%b3%e3%81%ae%e3%82%b3%e3%83%b3%e3%83%88%e3%83%a9%e3%82%af%e3%83%88>#</a></h3><p>openzeppelin-contractsã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚è¨˜è¿°ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sol data-lang=sol><span style=color:#66d9ef>pragma solidity</span> <span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>5</span>.<span style=color:#ae81ff>16</span> <span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>8</span>.<span style=color:#ae81ff>0</span>;

<span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;@openzeppelin/contracts/token/ERC20/ERC20.sol&#34;</span>;

<span style=color:#75715e>// https://docs.openzeppelin.com/contracts/2.x/erc20-supply
</span><span style=color:#75715e></span><span style=color:#66d9ef>contract</span> DappsToken <span style=color:#66d9ef>is</span> ERC20 {
    <span style=color:#66d9ef>string</span> <span style=color:#66d9ef>public</span> name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Dappstoken&#34;</span>;
    <span style=color:#66d9ef>string</span> <span style=color:#66d9ef>public</span> symbol <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;DTKN&#34;</span>;
    <span style=color:#66d9ef>uint</span> <span style=color:#66d9ef>public</span> decimals <span style=color:#f92672>=</span> <span style=color:#ae81ff>18</span>;

    constructor(<span style=color:#66d9ef>uint256</span> initialSupply) <span style=color:#66d9ef>public</span> {
        _mint(msg.sender, initialSupply);

        <span style=color:#75715e>// 8.3.2.15ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã¯10e18ã‚’è¿½åŠ 
</span><span style=color:#75715e></span>        <span style=color:#75715e>//_mint(msg.sender, initialSupply * (10 ** 18));
</span><span style=color:#75715e></span>    }
}
</code></pre></div><h3 id=8243-ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ>8.2.4.3: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ
<a class=anchor href=#8243-%e3%83%9e%e3%82%a4%e3%82%b0%e3%83%ac%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e3%81%ae%e5%ae%9f%e8%a1%8c>#</a></h3><p>8.1.6.8åŒæ§˜ã«<code>await</code>ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>truffle<span style=color:#f92672>(</span>develop<span style=color:#f92672>)</span>&gt; dappsToken <span style=color:#f92672>=</span> await DappsToken.at<span style=color:#f92672>(</span>DappsToken.address<span style=color:#f92672>)</span>
</code></pre></div><h3 id=8313-trufflejs>8.3.1.3: truffle.js
<a class=anchor href=#8313-trufflejs>#</a></h3><p><code>networks.development.network_id</code>ã¯gethã®<code>run</code>ã‚³ãƒãƒ³ãƒ‰ã§æŒ‡å®šã—ã¦ã„ã‚‹<code>--networkid</code>ã¨åŒã˜å€¤ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p><h3 id=8327-matemask-ether-faucetã§ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¡Œ>8.3.2.7: MateMask Ether Faucetã§ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¡Œ
<a class=anchor href=#8327-matemask-ether-faucet%e3%81%a7%e3%81%ae%e3%83%88%e3%83%a9%e3%83%b3%e3%82%b6%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e7%99%ba%e8%a1%8c>#</a></h3><p>ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦Etherã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚å–å¾—ã¯åˆ¥ã‚µã‚¤ãƒˆã§ã‚‚å¯èƒ½ãªã®ã§ãã‚Œã‚’åˆ©ç”¨ã—ã¾ã™ã€‚ã„ãã¤ã‹ã‚ã‚‹ã‚ˆã†ã§ã™ãŒä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã§å–å¾—ã§ãã¾ã—ãŸã€‚</p><p><a href=https://faucet.dimensions.network/>Ethereum Faucet - Ropsten</a></p><p><strong>Ref:</strong></p><ul><li><a href=https://github.com/MetaMask/metamask-extension/issues/5439#issuecomment-716547644>https://github.com/MetaMask/metamask-extension/issues/5439#issuecomment-716547644</a></li></ul><h3 id=83211-trufflejsã«ropstenã‚’è¨­å®š>8.3.2.11: truffle.jsã«Ropstenã‚’è¨­å®š
<a class=anchor href=#83211-trufflejs%e3%81%abropsten%e3%82%92%e8%a8%ad%e5%ae%9a>#</a></h3><p>truffleã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§è¨˜è¿°æ–¹æ³•ãŒå¤‰ã‚ã£ãŸã®ã§ã€npmãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p><p><strong>@truffle/hdwallet-providerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¿½åŠ </strong></p><p>truffle-config.jsã§ä½¿ç”¨ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ npm install @truffle/hdwallet-provider
</code></pre></div><p><strong>.secret</strong></p><p>èªè¨¼æƒ…å ±ã‚’<code>.secret</code>ã«å®šç¾©ã—ã¾ã™ã€‚MetaMaskã§ä½œæˆã—ãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ‹ãƒ¼ãƒ¢ãƒ‹ãƒƒã‚¯ã‚’ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=color:#a6e22e>&lt;nemonic1&gt; &lt;nemonic2&gt; &lt;nemonic3&gt; ...</span>
</code></pre></div><p><strong>truffle-config.js</strong></p><p>ãƒ•ã‚¡ã‚¤ãƒ«åãŒ<code>truffle.js</code>ã‹ã‚‰<code>truffle-config.js</code>ã«å¤‰ã‚ã‚Šã¾ã—ãŸã€‚<br><code>HDWalletProvider</code>ã«æ¸¡ã™URLã«<code>accessToken</code>ã§ã¯ãªã<code>PROJECT SECRET</code>ã‚’æ¸¡ã—ã¾ã™ã€‚<code>PROJECT SECRET</code>ã¯
<a href=https://infura.io>Infura</a>ã§ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å–å¾—ã§ãã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>HDWalletProvider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;@truffle/hdwallet-provider&#39;</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fs</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;fs&#39;</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>mnemonic</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>fs</span>.<span style=color:#a6e22e>readFileSync</span>(<span style=color:#e6db74>&#34;.secret&#34;</span>).<span style=color:#a6e22e>toString</span>().<span style=color:#a6e22e>trim</span>();

<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>networks</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>development</span><span style=color:#f92672>:</span> {
     <span style=color:#a6e22e>host</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;localhost&#34;</span>,     <span style=color:#75715e>// Localhost (default: none)
</span><span style=color:#75715e></span>     <span style=color:#a6e22e>port</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>8545</span>,            <span style=color:#75715e>// Standard Ethereum port (default: none)
</span><span style=color:#75715e></span>     <span style=color:#a6e22e>network_id</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;33&#34;</span>,       <span style=color:#75715e>// Any network (default: none)
</span><span style=color:#75715e></span>    },
    <span style=color:#a6e22e>ropsten</span><span style=color:#f92672>:</span> {
      <span style=color:#a6e22e>provider</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HDWalletProvider</span>(<span style=color:#a6e22e>mnemonic</span>, <span style=color:#e6db74>`https://ropsten.infura.io/v3/&lt;Infura PROJECT SECRET&gt;`</span>),
      <span style=color:#a6e22e>network_id</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3</span>,       <span style=color:#75715e>// Ropsten&#39;s id
</span><span style=color:#75715e></span>      <span style=color:#a6e22e>gas</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5500000</span>,        <span style=color:#75715e>// Ropsten has a lower block limit than mainnet
</span><span style=color:#75715e></span>      <span style=color:#a6e22e>confirmations</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>,    <span style=color:#75715e>// # of confs to wait between deployments. (default: 0)
</span><span style=color:#75715e></span>      <span style=color:#a6e22e>timeoutBlocks</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>200</span>,  <span style=color:#75715e>// # of blocks before a deployment times out  (minimum/default: 50)
</span><span style=color:#75715e></span>      <span style=color:#a6e22e>skipDryRun</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>     <span style=color:#75715e>// Skip dry run before migrations? (default: false for public nets )
</span><span style=color:#75715e></span>    },
  },
  ...
};
</code></pre></div><h3 id=83214-83215>8.3.2.14, 8.3.2.15
<a class=anchor href=#83214-83215>#</a></h3><p><code>migrate</code>ã§<code>initialSupply</code>ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã®ã§ã€Contractå´ã§1e18ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚</p><p><strong>2_deploy_dapps_token.js</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DappsToken</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>artifacts</span>.<span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;./Dappstoken.sol&#34;</span>);

<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>deployer</span>){
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>initialSupply</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1000</span>;
    <span style=color:#75715e>// ã“ã“ã§ã¯1000ã‚’æ¸¡ã™
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>deployer</span>.<span style=color:#a6e22e>deploy</span>(<span style=color:#a6e22e>DappsToken</span>, <span style=color:#a6e22e>initialSupply</span>, {
        <span style=color:#a6e22e>gas</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2000000</span>
    });
}
</code></pre></div><p><strong>DappsToken.sol</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sol data-lang=sol><span style=color:#66d9ef>pragma solidity</span> <span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>5</span>.<span style=color:#ae81ff>16</span> <span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>8</span>.<span style=color:#ae81ff>0</span>;

<span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;@openzeppelin/contracts/token/ERC20/ERC20.sol&#34;</span>;

<span style=color:#75715e>// https://docs.openzeppelin.com/contracts/2.x/erc20-supply
</span><span style=color:#75715e></span><span style=color:#66d9ef>contract</span> DappsToken <span style=color:#66d9ef>is</span> ERC20 {
    <span style=color:#66d9ef>string</span> <span style=color:#66d9ef>public</span> name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Dappstoken&#34;</span>;
    <span style=color:#66d9ef>string</span> <span style=color:#66d9ef>public</span> symbol <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;DTKN&#34;</span>;
    <span style=color:#66d9ef>uint</span> <span style=color:#66d9ef>public</span> decimals <span style=color:#f92672>=</span> <span style=color:#ae81ff>18</span>;

    constructor(<span style=color:#66d9ef>uint256</span> initialSupply) <span style=color:#66d9ef>public</span> {
        <span style=color:#75715e>// ã“ã“ã§decimalsã«åˆã‚ã›ã€1e18ã™ã‚‹
</span><span style=color:#75715e></span>        _mint(msg.sender, initialSupply <span style=color:#f92672>*</span> (<span style=color:#ae81ff>10</span> <span style=color:#f92672>**</span> <span style=color:#ae81ff>18</span>));
    }
}
</code></pre></div><h3 id=83220-å¤‰æ•°ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š>8.3.2.20: å¤‰æ•°ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š
<a class=anchor href=#83220-%e5%a4%89%e6%95%b0%e3%81%ab%e3%83%88%e3%83%bc%e3%82%af%e3%83%b3%e3%82%92%e8%a8%ad%e5%ae%9a>#</a></h3><p>overflowã§å¤±æ•—ã™ã‚‹ã®ã§<code>web3.utils.toBN</code>ã§å¤‰æ›ã—ãŸå€¤ã‚’æ¸¡ã—ã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>truffle<span style=color:#f92672>(</span>ropsten<span style=color:#f92672>)</span>&gt; d.transfer<span style=color:#f92672>(</span>â€œ&lt;receiver address&gt;â€, web3.utils.toBN<span style=color:#f92672>(</span>1e18<span style=color:#f92672>))</span>
</code></pre></div><h3 id=83221-æ®‹é«˜ã®ç¢ºèª>8.3.2.21: æ®‹é«˜ã®ç¢ºèª
<a class=anchor href=#83221-%e6%ae%8b%e9%ab%98%e3%81%ae%e7%a2%ba%e8%aa%8d>#</a></h3><p>æ®‹é«˜ãŒ<code>word</code>ã«å€¤ã‚’åˆ†å‰²ã—ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ã«è¡¨ç¤ºã™ã‚‹ã¨ä¸€ã¤ã®å€¤ã§è¡¨ç¤ºã§ãã¾ã™ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>truffle<span style=color:#f92672>(</span>ropsten<span style=color:#f92672>)</span>&gt; d.totalSupply<span style=color:#f92672>()</span>.then<span style=color:#f92672>(</span>result <span style=color:#f92672>=</span>&gt; <span style=color:#f92672>{</span>console.log<span style=color:#f92672>(</span>result.toString<span style=color:#f92672>())})</span>
</code></pre></div><h2 id=ã¾ã¨ã‚>ã¾ã¨ã‚
<a class=anchor href=#%e3%81%be%e3%81%a8%e3%82%81>#</a></h2><p>Solidityã‚„é–¢é€£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«ä¼´ã„ã€ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒå¤§ããå¤‰åŒ–ã—ã¦ã„ã‚‹ã“ã¨ã§ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³é–¢é€£æŠ€è¡“ã®å¤‰åŒ–ã®é€Ÿã•ã‚’å®Ÿæ„Ÿã—ã¾ã™ã­ã€‚<br>èª¿ã¹ã¦ã„ã‚‹ã¨ã€ã‚‚ã†ã“ã“ã¾ã§é–‹ç™ºãŒé€²ã‚“ã§ã„ã‚‹ã®ã‹ã¨ã„ã†å°è±¡ã‚‚ã€‚</p></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><ul><li><a href=#å®Ÿè¡Œç’°å¢ƒ>å®Ÿè¡Œç’°å¢ƒ</a></li><li><a href=#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆ>ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆ</a><ul><li><a href=#6143-gethã®åˆæœŸåŒ–å‡¦ç†>6.1.4.3: Gethã®åˆæœŸåŒ–å‡¦ç†</a></li><li><a href=#6158-ãƒ­ãƒƒã‚¯ã®è§£é™¤>6.1.5.8: ãƒ­ãƒƒã‚¯ã®è§£é™¤</a></li><li><a href=#7122-simplestoragesol>7.1.2.2: SimpleStorage.sol</a></li><li><a href=#7129-simplestorageownersol>7.1.2.9: SimpleStorageOwner.sol</a></li><li><a href=#8162-metacoinsol>8.1.6.2: MetaCoin.sol</a></li><li><a href=#8168-metacoinã‚’å¤‰æ•°ã«ä¿å­˜ã™ã‚‹>8.1.6.8: MetaCoinã‚’å¤‰æ•°ã«ä¿å­˜ã™ã‚‹</a></li><li><a href=#8169-getbalanceã®å‘¼ã³å‡ºã—>8.1.6.9: getBalanceã®å‘¼ã³å‡ºã—</a></li><li><a href=#8221-openzeppelinã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>8.2.2.1: OpenZeppelinã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li><li><a href=#8231-ãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ>8.2.3.1: ãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ</a></li><li><a href=#8243-ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ>8.2.4.3: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ</a></li><li><a href=#8313-trufflejs>8.3.1.3: truffle.js</a></li><li><a href=#8327-matemask-ether-faucetã§ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¡Œ>8.3.2.7: MateMask Ether Faucetã§ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¡Œ</a></li><li><a href=#83211-trufflejsã«ropstenã‚’è¨­å®š>8.3.2.11: truffle.jsã«Ropstenã‚’è¨­å®š</a></li><li><a href=#83214-83215>8.3.2.14, 8.3.2.15</a></li><li><a href=#83220-å¤‰æ•°ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š>8.3.2.20: å¤‰æ•°ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š</a></li><li><a href=#83221-æ®‹é«˜ã®ç¢ºèª>8.3.2.21: æ®‹é«˜ã®ç¢ºèª</a></li></ul></li><li><a href=#ã¾ã¨ã‚>ã¾ã¨ã‚</a></li></ul></li></ul></nav></aside></main></body></html>