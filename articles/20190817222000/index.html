<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="ja" >

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <title>Netlify &#43; HugoでTOCSS: failedが出た時の対応 | taka👨🏻‍💻</title>
  
  
  
  <link href="https://takakd.github.io/index.xml" rel="alternate" type="application/rss+xml" title="taka👨🏻‍💻" />
  
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  
  <link rel='stylesheet' href='/assets/style.min.9746b1bb72fa675611a9f0bb7b9a9496aef44849ca35844f5784695440b50dca.css'>
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="shortcut icon" href="/favicon.ico">
  
  
  
  
  
  
  
  <meta name="description"
    content="久しぶりにブログ更新するぞとGitHubにpushするとnetlifyのビルドエラーが発生。 その解決方法です。 対応 Netlifyの[Deploy Settings]にある[Build image selection]で、Ubuntu" />
</head>

<body class="d-flex flex-column vh-100">
  <section class="nav-Section m-0 p-0">
  <nav class="nav d-flex px-4 px-lg-5 align-items-center justify-content-between">
    <div class="my-3 my-lg-4">
      <a class="p-0 text-decoration-none" href="https://takakd.github.io">
        <h1 class="cs-title p-0 m-0">taka👨🏻‍💻</h1>
      </a>
    </div>
    <nav><a href="/about/" class="cs-menu-link text-decoration-none">
        About
      </a></nav>
  </nav>
</section>
  <section class="sn-Section m-0 p-0">
    <div class="px-4 px-lg-5 pt-5 pb-5">
      <h1 class="cs-title">Netlify &#43; HugoでTOCSS: failedが出た時の対応</h1>
      <h2 class="cs-subtitle pt-2">2019-08-17</h2>
      <div class="m-0 p-0">
        
          <a class="cs-tags" href="/tags/hugo">#Hugo</a>
        
      </div>
      
      <div class="content sn-Content mt-5">
        <p>久しぶりにブログ更新するぞとGitHubにpushするとnetlifyのビルドエラーが発生。<br>
その解決方法です。</p>
<h2 id="対応">対応</h2>
<p>Netlifyの[Deploy Settings]にある[Build image selection]で、<code>Ubuntu Trusty 14.04</code>を<code>Ubuntu Xenial 16.04 (default)</code>に変更する。</p>
<h2 id="エラー内容">エラー内容</h2>
<p>pushすると、<code>error: failed to transform resource: TOCSS:...</code>が発生。Sassのコンパイルに失敗しているようです。</p>
<pre><code>10:07:48 PM: export GIMME_ENV='/opt/buildhome/.gimme_cache/env/go1.10.linux.amd64.env';
10:07:48 PM: go version go1.10 linux/amd64
10:07:48 PM: Installing missing commands
10:07:48 PM: Verify run directory
10:07:48 PM: Executing user command: hugo --gc --minify
10:07:48 PM: Building sites …
10:07:48 PM: ERROR 2019/08/17 13:07:48 error: failed to transform resource: TOCSS: failed to transform &quot;assets/style.scss&quot; (text/x-scss): this feature is not available in your current Hugo version
10:07:48 PM: Total in 87 ms
10:07:48 PM: Error: Error building site: logged 1 error(s)
10:07:48 PM: Skipping functions preparation step: no functions directory set
10:07:48 PM: Caching artifacts
10:07:48 PM: Started saving pip cache
10:07:48 PM: Finished saving pip cache
</code></pre>
<p>Sassコンパイル可能なHugoは、Extendedバージョンと呼ばれるものなのですが、Netlifyでは2019/3/15まで暫定対応だったとのこと。
<a href="https://qiita.com/ikemo/items/4494e15e4e821f97ce9a">NetlifyでHugoのextendedバージョンが暫定対応されたので試してみた</a></p>
<p>Build imageのUbuntuをTrusty 14からXenial 16に変更して再ビルドするとうまく通りました。</p>
<p>なぜいままでコンパイル通ってたんだろうか……</p>
<h2 id="参考">参考</h2>
<p><a href="https://www.ikemo3.com/inverted/hugo/use-scss/">https://www.ikemo3.com/inverted/hugo/use-scss/</a><br>
<a href="https://rahilw.dev/blog/hugo-extended-on-netlify/">https://rahilw.dev/blog/hugo-extended-on-netlify/</a></p>

        
      </div>
      
    </div>
  </section>
  


<section class="ft-Section mt-auto ml-0 mr-0 mb-0 pa-0">
  <div class="d-flex px-5 py-4 align-items-center justify-content-md-between align-items-md-center flex-lg-row flex-column">
    <div class="d-flex align-items-center"><a class="ml-4 cs-sns-icon-link" aria-label="facebook"
        href='https://facebook.com/takakd987' target='_blank' rel='noopener'><?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g><path d="M1024,512c0,-282.77 -229.23,-512 -512,-512c-282.77,0 -512,229.23 -512,512c0,255.554 187.231,467.37 432,505.78l0,-357.78l-130,0l0,-148l130,0l0,-112.8c0,-128.32 76.438,-199.2 193.39,-199.2c56.017,0 114.61,10 114.61,10l0,126l-64.562,0c-63.603,0 -83.438,39.467 -83.438,79.957l0,96.043l142,0l-22.7,148l-119.3,0l0,357.78c244.769,-38.41 432,-250.226 432,-505.78Z" style="fill:#fff;fill-rule:nonzero;"/></g></svg></a><a class="ml-4 cs-sns-icon-link" aria-label="github"
        href='https://github.com/takakd' target='_blank' rel='noopener'><?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 33 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path d="M16.288,0.015c-8.994,0 -16.288,7.293 -16.288,16.29c0,7.197 4.667,13.302 11.14,15.456c0.815,0.15 1.112,-0.353 1.112,-0.785c0,-0.387 -0.014,-1.411 -0.022,-2.77c-4.531,0.984 -5.487,-2.184 -5.487,-2.184c-0.741,-1.882 -1.809,-2.383 -1.809,-2.383c-1.479,-1.01 0.112,-0.99 0.112,-0.99c1.635,0.115 2.495,1.679 2.495,1.679c1.453,2.489 3.813,1.77 4.741,1.353c0.148,-1.052 0.569,-1.77 1.034,-2.177c-3.617,-0.411 -7.42,-1.809 -7.42,-8.051c0,-1.778 0.635,-3.233 1.677,-4.371c-0.168,-0.412 -0.727,-2.069 0.16,-4.311c0,0 1.367,-0.438 4.479,1.67c1.299,-0.362 2.693,-0.542 4.078,-0.549c1.384,0.007 2.777,0.187 4.078,0.549c3.11,-2.108 4.475,-1.67 4.475,-1.67c0.889,2.242 0.33,3.899 0.163,4.311c1.044,1.138 1.674,2.593 1.674,4.371c0,6.258 -3.809,7.635 -7.437,8.038c0.584,0.503 1.105,1.497 1.105,3.016c0,2.178 -0.02,3.935 -0.02,4.469c0,0.436 0.294,0.943 1.12,0.784c6.468,-2.159 11.131,-8.26 11.131,-15.455c0,-8.997 -7.294,-16.29 -16.291,-16.29Z" style="fill:#fff;"/></svg></a><a class="ml-4 cs-sns-icon-link" aria-label="linkedin"
        href='https://linkedin.com/in/takakd' target='_blank' rel='noopener'><svg id="Group_1282" data-name="Group 1282" xmlns="http://www.w3.org/2000/svg" width="76.624" height="65.326" viewBox="0 0 76.624 65.326">
  <path id="Path_2525" data-name="Path 2525" d="M1165,274.515a1.2,1.2,0,0,0,1.21-1.269c0-.9-.543-1.33-1.657-1.33h-1.8v4.712h.677v-2.054h.832l.019.025,1.291,2.029h.724l-1.389-2.1Zm-.783-.472h-.785V272.45h.995c.514,0,1.1.084,1.1.757,0,.774-.593.836-1.314.836" transform="translate(-1092.136 -213.406)" fill="#0a66c2"/>
  <path id="Path_2520" data-name="Path 2520" d="M958.98,112.559h-9.6V97.525c0-3.585-.064-8.2-4.993-8.2-5,0-5.765,3.906-5.765,7.939v15.294h-9.6V81.642h9.216v4.225h.129a10.1,10.1,0,0,1,9.093-4.994c9.73,0,11.524,6.4,11.524,14.726ZM918.19,77.416a5.571,5.571,0,1,1,5.57-5.572,5.571,5.571,0,0,1-5.57,5.572m4.8,35.143h-9.61V81.642h9.61Zm40.776-55.2h-55.21a4.728,4.728,0,0,0-4.781,4.67v55.439a4.731,4.731,0,0,0,4.781,4.675h55.21a4.741,4.741,0,0,0,4.8-4.675V62.025a4.738,4.738,0,0,0-4.8-4.67" transform="translate(-903.776 -57.355)" fill="#0a66c2"/>
  <path id="Path_2526" data-name="Path 2526" d="M1156.525,264.22a4.418,4.418,0,1,0,.085,0h-.085m0,8.33a3.874,3.874,0,1,1,3.809-3.938c0,.022,0,.043,0,.065a3.791,3.791,0,0,1-3.708,3.871h-.1" transform="translate(-1084.362 -207.809)" fill="#0a66c2"/>
</svg>
</a><a class="ml-4 cs-sns-icon-link" aria-label="twitter"
        href='https://twitter.com/takakdkd' target='_blank' rel='noopener'><?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 20.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="White" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 400" style="enable-background:new 0 0 400 400;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#FFFFFF;}
</style>
<path class="st0" d="M400,200c0,110.5-89.5,200-200,200S0,310.5,0,200S89.5,0,200,0S400,89.5,400,200z M163.4,305.5
	c88.7,0,137.2-73.5,137.2-137.2c0-2.1,0-4.2-0.1-6.2c9.4-6.8,17.6-15.3,24.1-25c-8.6,3.8-17.9,6.4-27.7,7.6
	c10-6,17.6-15.4,21.2-26.7c-9.3,5.5-19.6,9.5-30.6,11.7c-8.8-9.4-21.3-15.2-35.2-15.2c-26.6,0-48.2,21.6-48.2,48.2
	c0,3.8,0.4,7.5,1.3,11c-40.1-2-75.6-21.2-99.4-50.4c-4.1,7.1-6.5,15.4-6.5,24.2c0,16.7,8.5,31.5,21.5,40.1c-7.9-0.2-15.3-2.4-21.8-6
	c0,0.2,0,0.4,0,0.6c0,23.4,16.6,42.8,38.7,47.3c-4,1.1-8.3,1.7-12.7,1.7c-3.1,0-6.1-0.3-9.1-0.9c6.1,19.2,23.9,33.1,45,33.5
	c-16.5,12.9-37.3,20.6-59.9,20.6c-3.9,0-7.7-0.2-11.5-0.7C110.8,297.5,136.2,305.5,163.4,305.5"/>
</svg>
</a></div>
    <div>
      <p class="ml-0 mr-0 mb-0 mt-4 mt-lg-0 p-0">&copy; taka 2018</p>
      
    </div>
  </div>
</section>






<script src="/assets/bundle.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-108607644-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




</body>

</html>