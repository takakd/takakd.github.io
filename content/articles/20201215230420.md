---
title: "クリーンアーキテクチャ + Golang + AWS LambdaでのAPIを実装したときの気づき"
date: 2020-12-15T23:04:21+09:00
draft: true
tags: ["golang", "design"]
---

GolangとAWS環境とクリーンアーキテクチャ設計でAPIを実装しました。
この記事では、実装していく中で気づいた点を共有したいと思います。

# 実装したもの

[Slack Timer](https://github.com/takakd/slack-timer)
    [概要](https://github.com/takakd/slack-timer#design)

SlackのBotに特定のメッセージを送ると、定期的に通知を送ってくれるアプリです。通知間隔とメッセージ、そして通知ON/OFFを設定できます。SlackのAPIとAWS Lambda側に実装したAPIで機能を実現しています。

このアプリは全ユーザーに対してAWS Lambdaから通知を送っており、多数のユーザーが利用するユースケースでは不適切な設計となっています。 機能実現という視点ではあまり参考にならないということだけご容赦ください。

なお、通知機能はSlackが[Reminder](https://slack.com/help/articles/208423427-Set-a-reminder)というものを提供しています。通知を利用したい場合は公式の機能であるそちらを利用すべきです。

# 気づき

振り返ってみると、Golang実装、クリーンアーキテクチャ設計、AWS利用の視点が混ざっておりますが、気づいた点そのまま列挙したいと思います。

## Interfaceの役割
　単体テストするならとりあえずinterface
　命名で迷う Handler, HandlerFunctor

## プロジェクトディレクトリ
ディレクトリ分け
  素直にpresenter
  Media.DOのアプローチに対する考え（bookなど）

## パッケージの命名
パッケージ分け
　ヘルパの分割、
　helperという命名
　パッケージの命名規則の準拠

## 単体テスト
単体テスト
　Exampleを書くか
  CI 170ぐらい
  AWSリソースのユニットテスト

## DIの実現
DIの実現方法

## 値レシーバ vs. ポインタレシーバ
ポインタレシーバ

# おわりに

いかがでしたでしょうか。

一人でちまちまと実装する場合は、クリーンアーキテクチャの保守性の効果を十分発揮できないように感じますが、実装において検討すべきポイントを実感でき、Golangとクリーンアーキテクチャともに理解を深めるよい学習機会になったように思います。

チャンネルやゴルーチンの活用ができていないので、次はそれらも使っていきたいですね。

ただのKata projectですが、レビューなどいただけると嬉しいです。

最後までお読み頂きありがとうございました。